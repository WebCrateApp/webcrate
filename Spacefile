# Spacefile Docs: https://alpha.deta.space/docs/en/reference/spacefile 
v: 0
app_name: WebCrate
icon: client/static/icon.png
micros:
  - name: server
    src: ./server
    path: /api
    engine: nodejs16
    dev: npm run dev
    commands: ['npm run build']
    include:
      - build
      - package.json
      - node_modules
    run: node build/index.js
    public_routes:
      - /public/*
      - /img/*
    presets:
      api_keys: true
    provide_actions: true

  - name: client
    src: ./client
    engine: static
    primary: true
    dev: npm run dev
    commands: ['npm run build']
    serve: dist
    public_routes:
      - /_nuxt/*
      - /link/public/*
      - /crate/public/*
