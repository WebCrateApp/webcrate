# Spacefile Docs: https://alpha.deta.space/docs/en/reference/spacefile 
v: 0
name: WebCrate
icon: client/static/icon.png
micros:
  - name: client
    src: ./client
    engine: static
    primary: true
    commands: ['npm run build']
    serve: dist
    public_routes:
      - /_nuxt/*
      - /link/public/*
      - /crate/public/*

  - name: server
    src: ./server
    path: server
    engine: nodejs16
    commands: ['npm run build']
    include:
      - build
      - package.json
      - node_modules
    run: node build/index.js
    public_routes:
      - /api/public/*
      - /img/*
